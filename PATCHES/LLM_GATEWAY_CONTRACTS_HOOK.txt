FILE: llm_gateway.js
FIND: // BUILD PROMPT START
INSERT AFTER // BUILD PROMPT START
const { renderSlice } = require("./node/contracts_loader");
const CONTRACTS_SIDECAR = process.env.CONTRACTS_SIDECAR || "contracts.min.json";
const CONTRACTS_VENDOR  = process.env.CONTRACTS_VENDOR  || "codex";
const CONTRACTS_SLICES  = process.env.CONTRACTS_SLICES  || "roles,tools";
const CONTRACTS_USE_FULL = process.env.CONTRACTS_USE_FULL === "1";
let contractsBlock = "";
try {
  if (!CONTRACTS_USE_FULL) {
    contractsBlock = renderSlice({ vendor: CONTRACTS_VENDOR, slice: CONTRACTS_SLICES, fmt: "text", sidecar: CONTRACTS_SIDECAR });
  }
} catch (e) {
  console.warn("[contracts] sidecar render failed, falling back:", e.message);
  contractsBlock = "";
}
// Prepend contractsBlock into your system/context composition if set.
