{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "llmc://schemas/rag_nav/jsonl_event.schema.json",
  "title": "CLI JSONL: route/item events",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "route"
        },
        "query": {
          "type": [
            "string",
            "null"
          ]
        },
        "symbol": {
          "type": [
            "string",
            "null"
          ]
        },
        "direction": {
          "type": [
            "string",
            "null"
          ]
        },
        "route": {
          "$ref": "llmc://schemas/rag_nav/route.schema.json"
        }
      },
      "required": [
        "type",
        "route"
      ],
      "additionalProperties": false
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "const": "item"
        },
        "file": {
          "type": "string"
        },
        "snippet": {
          "$ref": "llmc://schemas/rag_nav/snippet.schema.json"
        },
        "source": {
          "type": "string",
          "enum": [
            "RAG_GRAPH",
            "LOCAL_FALLBACK"
          ]
        },
        "freshness_state": {
          "type": "string",
          "enum": [
            "FRESH",
            "STALE",
            "UNKNOWN"
          ]
        }
      },
      "required": [
        "type",
        "file",
        "snippet",
        "source",
        "freshness_state"
      ],
      "additionalProperties": false
    }
  ]
}

