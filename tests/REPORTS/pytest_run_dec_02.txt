============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0
rootdir: /home/vmlinux/src/llmc
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
plugins: langsmith-0.4.46, anyio-4.11.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1379 items / 1 skipped

tests/_examples/test_nav_template.py .                                   [  0%]
tests/routing/test_query_type_phase1_change1.py ..                       [  0%]
tests/routing/test_query_type_phase1_change2_priority.py ...             [  0%]
tests/routing/test_query_type_phase1_change3_4_fences_and_conflicts.py . [  0%]
....                                                                     [  0%]
tests/routing/test_query_type_phase2_code_quality.py .......             [  1%]
tests/routing/test_query_type_phase3_conflict_policy.py ..               [  1%]
tests/routing/test_query_type_phase4_refactor_and_metrics.py ...         [  1%]
tests/test_ast_chunker.py ....                                           [  1%]
tests/test_cli_clean_guard.py ..                                         [  2%]
tests/test_cli_contracts.py ..............................               [  4%]
tests/test_cli_entry_error_codes.py .                                    [  4%]
tests/test_cli_entry_json_output.py .                                    [  4%]
tests/test_cli_p2_regression.py ...                                      [  4%]
tests/test_cli_path_safety.py ...                                        [  4%]
tests/test_config_est_tokens_per_span.py ...                             [  5%]
tests/test_context_gateway_edge_cases.py ............................... [  7%]
...................................                                      [  9%]
tests/test_daemon_purge_guard.py ..                                      [ 10%]
tests/test_daemon_submission_path_safety.py ..                           [ 10%]
tests/test_database_bootstrap.py ..                                      [ 10%]
tests/test_database_core.py ...                                          [ 10%]
tests/test_db_fts_basic.py ..                                            [ 10%]
tests/test_doctor_paths_cli.py .                                         [ 10%]
tests/test_e2e_cli_workspace_guard.py ..                                 [ 10%]
tests/test_e2e_daemon_operation.py .........                             [ 11%]
tests/test_e2e_daemon_registry_constraints.py ..                         [ 11%]
tests/test_e2e_operator_workflows.py .........................           [ 13%]
tests/test_embeddings_behavior.py ....                                   [ 13%]
tests/test_embeddings_unit.py ...                                        [ 13%]
tests/test_enrichment_adapters.py ....                                   [ 14%]
tests/test_enrichment_aegis_data.py ...                                  [ 14%]
tests/test_enrichment_backends.py ..                                     [ 14%]
tests/test_enrichment_batch.py ..                                        [ 14%]
tests/test_enrichment_cascade.py ...                                     [ 15%]
tests/test_enrichment_cascade_builder.py ...                             [ 15%]
tests/test_enrichment_config.py ..........                               [ 15%]
tests/test_enrichment_core.py ..                                         [ 16%]
tests/test_enrichment_data_integration_failure.py ...                    [ 16%]
tests/test_enrichment_integration.py ...                                 [ 16%]
tests/test_enrichment_integration_edge_cases.py ........................ [ 18%]
...................................................                      [ 21%]
tests/test_enrichment_router_basic.py .....................              [ 23%]
tests/test_enrichment_spanhash_and_fallbacks.py ..                       [ 23%]
tests/test_erp_routing.py ......                                         [ 24%]
tests/test_error_handling_comprehensive.py ............................. [ 26%]
...............                                                          [ 27%]
tests/test_eval_harness.py .                                             [ 27%]
tests/test_export_force_guard.py .                                       [ 27%]
tests/test_export_path_safety.py ..                                      [ 27%]
tests/test_file_mtime_guard.py ssssssssssss                              [ 28%]
tests/test_freshness_gateway.py .............                            [ 29%]
tests/test_freshness_index_status.py .....................               [ 30%]
tests/test_fts_backend_edge_cases.py ................................... [ 33%]
....................................................                     [ 37%]
tests/test_fusion_logic.py ......                                        [ 37%]
tests/test_fuzzy_linking.py .....                                        [ 37%]
tests/test_graph_building.py .....                                       [ 38%]
tests/test_graph_enrichment_merge.py .....                               [ 38%]
tests/test_graph_stitching_edge_cases.py ............................... [ 40%]
                                                                         [ 40%]
tests/test_idle_loop_throttling.py ssss                                  [ 41%]
tests/test_index_status.py .....                                         [ 41%]
tests/test_indexer_basic.py ..                                           [ 41%]
tests/test_log_management_scripts.py ................................... [ 44%]
                                                                         [ 44%]
tests/test_mcp_executables.py .                                          [ 44%]
tests/test_multi_route_retrieval.py ...                                  [ 44%]
tests/test_multiple_registry_entries.py ssssssssss                       [ 45%]
tests/test_nav_adapter_wraps_models.py ...                               [ 45%]
tests/test_nav_meta.py ..............................                    [ 47%]
tests/test_nav_meta_envelopes_ok_error.py .                              [ 47%]
tests/test_nav_tool_handlers_unit.py ..                                  [ 47%]
tests/test_nav_tools_integration.py ...........sssss.....                [ 49%]
tests/test_ollama_live.py s                                              [ 49%]
tests/test_p0_acceptance.py ..                                           [ 49%]
tests/test_path_policy.py ..                                             [ 49%]
tests/test_path_safety.py .....                                          [ 50%]
tests/test_phase2_enrichment_integration.py .......                      [ 50%]
tests/test_phase4.py ....                                                [ 50%]
tests/test_policy_logging_and_skip.py .                                  [ 51%]
tests/test_query_routing.py ......                                       [ 51%]
tests/test_query_routing_integration.py .                                [ 51%]
tests/test_qwen_enrich_batch_static.py ..                                [ 51%]
tests/test_rag_analytics.py ............................................ [ 54%]
                                                                         [ 54%]
tests/test_rag_benchmark.py ............................................ [ 58%]
........                                                                 [ 58%]
tests/test_rag_daemon_complete.py ..............................         [ 60%]
tests/test_rag_daemon_e2e_smoke.py ..                                    [ 60%]
tests/test_rag_daemon_registry_pathsafety.py ..                          [ 61%]
tests/test_rag_daemon_scheduler.py .                                     [ 61%]
tests/test_rag_daemon_scheduler_edge_cases.py .......................... [ 63%]
.....                                                                    [ 63%]
tests/test_rag_daemon_state_store.py ..                                  [ 63%]
tests/test_rag_failures.py ssssss                                        [ 64%]
tests/test_rag_inspect_llm_tool.py .......                               [ 64%]
tests/test_rag_nav_build_graph.py .                                      [ 64%]
tests/test_rag_nav_enriched_tools.py ...                                 [ 64%]
tests/test_rag_nav_gateway.py ....                                       [ 65%]
tests/test_rag_nav_gateway_critical.py .....................             [ 66%]
tests/test_rag_nav_metadata.py ...                                       [ 66%]
tests/test_rag_nav_tools.py ...                                          [ 67%]
tests/test_rag_operation_scripts.py .................................... [ 69%]
                                                                         [ 69%]
tests/test_rag_repo_complete.py .......................                  [ 71%]
tests/test_rag_repo_registry.py .                                        [ 71%]
tests/test_rag_repo_registry_pathsafety.py .                             [ 71%]
tests/test_rag_repo_workspace.py .                                       [ 71%]
tests/test_rag_repo_workspace_pathsafety.py ..                           [ 71%]
tests/test_rag_router.py ............................................... [ 75%]
.......                                                                  [ 75%]
tests/test_rag_score_normalization.py ..                                 [ 75%]
tests/test_refresh_sync_cron_scripts.py ................................ [ 78%]
...................                                                      [ 79%]
tests/test_repo_add_idempotency.py ssssssssssss                          [ 80%]
tests/test_reranker_edge_cases.py ...................................... [ 83%]
..............................................                           [ 86%]
tests/test_resilient_rag.py .                                            [ 86%]
tests/test_router.py ....                                                [ 86%]
tests/test_router_critical.py ...................                        [ 88%]
tests/test_router_logic_bug.py ......                                    [ 88%]
tests/test_routing.py .......                                            [ 89%]
tests/test_routing_comprehensive.py ...........                          [ 89%]
tests/test_routing_integration.py ........                               [ 90%]
tests/test_ruthless_edge_cases.py .................................      [ 92%]
tests/test_safe_fs.py ..                                                 [ 93%]
tests/test_safecopy_move_policy.py ..                                    [ 93%]
tests/test_safefs_policy_integration.py ..                               [ 93%]
tests/test_safetmp.py ..                                                 [ 93%]
tests/test_scheduler_eligibility_comprehensive.py ...........            [ 94%]
tests/test_schema_metadata.py .....                                      [ 94%]
tests/test_search_command_regression.py ..                               [ 94%]
tests/test_service_auto_vacuum.py ..                                     [ 94%]
tests/test_service_components.py ...                                     [ 95%]
tests/test_service_exorcist.py ....                                      [ 95%]
tests/test_snapshot_workspace.py .                                       [ 95%]
tests/test_symlink_escape_strict.py .                                    [ 95%]
tests/test_te_enrichment_manual.py ...                                   [ 95%]
tests/test_te_stats_output.py ..                                         [ 95%]
tests/test_te_unit.py ..................................                 [ 98%]
tests/test_worker_pool_comprehensive.py ............                     [ 99%]
tests/test_wrapper_scripts.py ssssssssss                                 [100%]

================= 1319 passed, 61 skipped in 123.70s (0:02:03) =================
